@page "/"
@using Flurl.Http;
@using ShikkhanobishTimeline.Model


<html>
<head>
</head>
<body style="margin:0;padding:0;">
    @for (int i = 0; i < postList.Count; i++)
    {
        for (int j = 0; j < tagList.Count; j++)
        {
            if (postList[i].tagID == tagList[j].tagID)
            {
                <div>
                    <div class="form-group row " style="background-color:white">
                        <div class="col-md-4">

                        </div>

                        <div class="card col-md-4 shadow-sm ">
                            <div class=" form-group row pt-1 m-0">
                                <div class="col-md-6 p-0 m-0">
                                    <label class="m-0 p-0" style="font:bolder;color:black ;  font-size:16px;font-weight:bold">@postList[i].name</label>
                                    <span class="m-0 p-0" style="font-size:8px">@postList[i].postDate</span>
                                </div>
                            </div>
                            <div class=" m-0 " style="text-align:right">
                                <label class="m-0" style="background-color: #ED50F1; color: black; border-radius: 10px; padding: 3px 12px; font-size: 9px ">@tagList[j].tagName</label>
                            </div>
                            <div class=" m-0 p-0">
                                <p class="pl-0 p-0" style=" font-size:9px; text-align:justify">
                                    @postList[i].post
                                </p>
                            </div>


                            <div class="shadow-lg form-group row m-0">
                                <img src="/images/stad.jpg" style="display: block; margin-left: auto; margin-right: auto; width: 100%;">
                            </div>

                            <div class="form-group row m-0 p-0">
                                <div class="col-12 m-0 p-1" style="">
                                    <label class=" m-0">
                                        <i style="color: blue; font-size: 12px;" class="far fa-comment"></i>&nbsp;<span style="font-size: 10px; color: black; font-weight: bold;">@postList[i].noOfComment</span>
                                    </label>

                                </div>
                            </div>

                            <hr class="m-0" />
                            <div class="form-group row m-0 p-0">
                                <div class="comment col-12 p-1 m-0" style="text-align:center">
                                    <a href="/Comment" class="btn btn-outline-primary m-0 p-0" style="width:100%;">
                                        <label class="m-0"><i style="color:blue;font-size:10px" class="far fa-comment m-0 p-0"></i></label>
                                        <span class="m-0 p-0" style="color: black; font-size:10px ;">Answer</span>
                                    </a>
                                </div>
                            </div>

                        </div>
                        <div class="col-md-4">

                        </div>
                    </div>
                </div>
            }

        }

    }
</body>
</html>

@code{
    List<Posts> postList = new List<Posts>();
    List<Tags> tagList = new List<Tags>();

    protected override async Task OnInitializedAsync()
    {
        await GetPost();
    }
    public async Task GetPost()
    {
        var list = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getPost".GetJsonAsync<List<Posts>>();
        //get all tag 
        var list2 = await "https://api.shikkhanobish.com/api/ShikkhanobishLogin/getTag".GetJsonAsync<List<Tags>>();


        postList = list;
        tagList = list2;
    }

}